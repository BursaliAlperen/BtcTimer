<!DOCTYPE html><html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />
  <title>3D Car Scene - BTC Edition</title>
  <style>
    body { margin: 0; overflow: hidden; background-color: #a0d7e6; font-family: sans-serif; touch-action: none; }
    canvas { display: block; }
    #score, #game-over, #start-screen {
      position: absolute; left: 50%; transform: translateX(-50%);
      color: white; text-shadow: 1px 1px 3px black;
      z-index: 100; text-align: center;
    }
    #score { top: 10px; font-size: 1.5em; }
    #game-over, #start-screen {
      top: 50%; transform: translate(-50%, -50%);
      font-size: 2em; font-weight: bold; display: none;
    }
  </style>
</head>
<body>
  <div id="score">BTC: 0.00000000 BTC</div>
  <div id="game-over">KAYBETTİN!<br>BTC: 0.00000000</div>
  <div id="start-screen">BAŞLAMAK İÇİN DOKUN</div>
  <script type="module">
    import * as THREE from 'https://unpkg.com/three@0.164.1/build/three.module.js';let scene, camera, renderer, carModel, enemyCar;
let btcScore = 0;
const btcPerPoint = 0.0000001;
let isStarted = false;
let isGameOver = false;

const scoreElement = document.getElementById('score');
const gameOverElement = document.getElementById('game-over');
const startScreen = document.getElementById('start-screen');

const playerBox = new THREE.Box3();
const enemyBox = new THREE.Box3();
const pointBox = new THREE.Box3();
const points = [];

function init() {
  scene = new THREE.Scene();
  camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
  renderer = new THREE.WebGLRenderer();
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  const light = new THREE.AmbientLight(0xffffff); scene.add(light);
  const ground = new THREE.Mesh(new THREE.PlaneGeometry(100,100), new THREE.MeshBasicMaterial({ color: 0x555555 }));
  ground.rotation.x = -Math.PI/2; scene.add(ground);

  carModel = new THREE.Mesh(new THREE.BoxGeometry(2,1,4), new THREE.MeshBasicMaterial({ color: 0xff0000 }));
  carModel.position.y = 0.5; scene.add(carModel);

  enemyCar = new THREE.Mesh(new THREE.BoxGeometry(2,1,4), new THREE.MeshBasicMaterial({ color: 0x0000ff }));
  enemyCar.position.set(2,0.5,20); scene.add(enemyCar);

  const pointGeo = new THREE.SphereGeometry(0.3, 8, 8);
  const pointMat = new THREE.MeshBasicMaterial({ color: 0xffff00 });
  for (let i = 0; i < 10; i++) {
    const p = new THREE.Mesh(pointGeo, pointMat);
    resetPointPosition(p);
    scene.add(p);
    points.push(p);
  }

  camera.position.set(0,5,-10);
  camera.lookAt(0,0,0);
  animate();
}

function startGame() {
  isStarted = true;
  isGameOver = false;
  btcScore = parseFloat(localStorage.getItem('btcScore')) || 0;
  scoreElement.textContent = `BTC: ${btcScore.toFixed(8)} BTC`;
  gameOverElement.style.display = 'none';
  startScreen.style.display = 'none';
}

function resetPointPosition(p) {
  p.position.set((Math.random() - 0.5)*10, 0.3, Math.random()*50);
}

function collect(p) {
  btcScore += btcPerPoint;
  localStorage.setItem('btcScore', btcScore.toFixed(8));
  scoreElement.textContent = `BTC: ${btcScore.toFixed(8)} BTC`;
  resetPointPosition(p);
}

function triggerGameOver() {
  isGameOver = true;
  isStarted = false;
  gameOverElement.innerHTML = `KAYBETTİN!<br><br>BTC: ${btcScore.toFixed(8)}`;
  gameOverElement.style.display = 'block';
}

function update() {
  if (!isStarted || isGameOver) return;

  playerBox.setFromObject(carModel);
  enemyBox.setFromObject(enemyCar);

  if (playerBox.intersectsBox(enemyBox)) {
    triggerGameOver();
    return;
  }

  for (let p of points) {
    pointBox.setFromObject(p);
    if (playerBox.intersectsBox(pointBox)) collect(p);
  }

  enemyCar.position.z -= 0.2;
  if (enemyCar.position.z < -10) enemyCar.position.z = 50;
}

function animate() {
  requestAnimationFrame(animate);
  update();
  renderer.render(scene, camera);
}

document.body.addEventListener('click', () => {
  if (!isStarted || isGameOver) startGame();
});

init();

  </script>
</body>
</html>
